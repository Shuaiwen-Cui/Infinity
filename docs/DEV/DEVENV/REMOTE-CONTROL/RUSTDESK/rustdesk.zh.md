# å¦‚ä½•è‡ªå»ºæœåŠ¡å™¨ä½¿ç”¨RustDesk

## é“¾æ¥

<div class="grid cards" markdown>

-   :material-remote-desktop:{ .lg .middle } __RustDesk__

    ---

    ä¸€æ¬¾å…è´¹å¼€æºçš„è¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼Œæ”¯æŒè‡ªå»ºæœåŠ¡å™¨ã€‚

    [:octicons-arrow-right-24: <a href="https://rustdesk.com/" target="_blank"> ä¼ é€é—¨ </a>](#)

</div>

## ä»€ä¹ˆæ˜¯RustDesk

RustDeskæ˜¯ä¸€æ¬¾ **å…è´¹å¼€æº** çš„è¿œç¨‹æ¡Œé¢è½¯ä»¶ã€‚å®ƒè·¨å¹³å°ï¼Œæ”¯æŒWindowsã€MacOSå’ŒLinuxã€‚å®ƒéå¸¸å®¹æ˜“ä½¿ç”¨ï¼Œç•Œé¢å‹å¥½ã€‚å…¶æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ **æ”¯æŒè‡ªå»ºæœåŠ¡å™¨** ã€‚æ‚¨å¯ä»¥æ„å»ºè‡ªå·±çš„æœåŠ¡å™¨å¹¶ä½¿ç”¨å®ƒæ¥è¿æ¥è¿œç¨‹è®¡ç®—æœºã€‚è¿™å¯¹äºé‚£äº›æƒ³è¦æ§åˆ¶è¿œç¨‹è®¡ç®—æœºä½†åˆä¸æƒ³ä½¿ç”¨å…¬å…±æœåŠ¡å™¨çš„äººæ¥è¯´éå¸¸æœ‰ç”¨ã€‚

## å®¢æˆ·ç«¯å®‰è£…å’Œä½¿ç”¨

æœ¬æ–‡çš„é‡ç‚¹æ˜¯å¦‚ä½•æ„å»ºè‡ªå·±çš„æœåŠ¡å™¨å¹¶ä½¿ç”¨å®ƒæ¥è¿æ¥è¿œç¨‹è®¡ç®—æœºã€‚å®¢æˆ·ç«¯ä¸‹è½½è¯·å‚è€ƒgithubé“¾æ¥ï¼Œå®‰è£…å’Œä½¿ç”¨è¯·å‚è€ƒå®˜æ–¹æŒ‡å—ã€‚

<div class="grid cards" markdown>

-   :material-github:{ .lg .middle } __RustDesk å®¢æˆ·ç«¯__

    ---

    [:octicons-arrow-right-24: <a href="https://github.com/rustdesk/rustdesk/releases/tag/1.2.3" target="_blank"> ä¼ é€é—¨ </a>](#)

-   :material-book:{ .lg .middle } __RustDesk å®˜æ–¹æŒ‡å—__

    ---

    [:octicons-arrow-right-24: <a href="https://rustdesk.com/docs/" target="_blank"> ä¼ é€é—¨ </a>](#)

</div>


## å¼€å§‹ä¹‹å‰
å‡å®šæ‚¨æœ‰ä¸€å°è¿è¡ŒLinuxçš„äº‘æœåŠ¡å™¨ã€‚å¦‚æœæ‚¨æ²¡æœ‰ï¼Œè¯·å‚è€ƒ[è¿™ç¯‡æ–‡ç« ](http://www.cuishuaiwen.com:8000/zh/CLOUD/HANDS-ON/001-HAVE-A-SERVER/have-a-server/)ã€‚

## æœ¬æ•™ç¨‹å‚è€ƒèµ„æ–™

<div class="grid cards" markdown>

-   :fontawesome-brands-bilibili:{ .lg .middle } __è‡ªå»ºRustDeskè¿œç¨‹æ¡Œé¢è¿æ¥æœåŠ¡ï¼Œç§æœ‰åŒ–éƒ¨ç½²__

    ---

    [:octicons-arrow-right-24: <a href="https://www.bilibili.com/video/BV148411i7DR/?spm_id_from=333.337.search-card.all.click&vd_source=5a427660f0337fedc22d4803661d493f" target="_blank"> ä¼ é€é—¨ </a>](#)

-   :material-book:{ .lg .middle } __è‡ªå»ºè¿œç¨‹æ¡Œé¢è¿æ¥æœåŠ¡ï¼ŒRustDeskæ­å»ºæ•™ç¨‹__

    ---

    [:octicons-arrow-right-24: <a href="https://www.mintimate.cn/2023/08/27/guideToHostRustDesk/" target="_blank"> ä¼ é€é—¨ </a>](#)

</div>

## æ•™ç¨‹å¼€å§‹
æˆ‘ä»¬çš„æ•™ç¨‹ä»è¿™é‡Œå¼€å§‹ã€‚

## é€šè¿‡SSHè¿æ¥åˆ°è¿œç¨‹è®¡ç®—æœº

æˆ‘ä½¿ç”¨[MobaXterm](https://mobaxterm.mobatek.net/)é€šè¿‡SSHè¿æ¥æˆ‘çš„äº‘æœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•æ‚¨å–œæ¬¢çš„SSHå®¢æˆ·ç«¯ï¼Œä¾‹å¦‚Termiusã€PuTTYç­‰ã€‚

![MobaXterm](MobaXterm.png)

## ä¸ºRustDeskåˆ›å»ºä¸€ä¸ªç›®å½•

å¯¹äºæˆ‘çš„æƒ…å†µï¼Œæˆ‘åœ¨æ ¹ç›®å½•`/`ä¸‹åˆ›å»ºäº†ä¸€ä¸ªåä¸º`RUSTDESK-Sever`çš„ç›®å½•ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd /
```

ç„¶å

```bash
mkdir RUSTDESK-Sever
```

ç„¶åè¿›å…¥åˆ°è¿™ä¸ªç›®å½•

```bash
cd RUSTDESK-Sever
```

## ä¸‹è½½RustDeskæœåŠ¡å™¨

![RustDesk Server](rustdesk-release.png)

å‰å¾€[ğŸŒ RustDesk Server å‘å¸ƒé¡µé¢](https://github.com/rustdesk/rustdesk-server/releases) é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ã€‚æˆ‘é€‰æ‹©çš„æ˜¯`rustdesk-server-linux-amd64.zip`ã€‚

å³é”®å•å‡»è¦ä¸‹è½½çš„æ–‡ä»¶ï¼Œç„¶åé€‰æ‹©`å¤åˆ¶é“¾æ¥åœ°å€`ã€‚ç„¶åè¿è¡Œä»¥ä¸‹è¯­å¥ï¼š

```bash
wget <ä¸‹è½½é“¾æ¥>
```

æˆ‘ä¸ªäººçš„ä¾‹å­ï¼š

```bash
wget https://github.com/rustdesk/rustdesk-server/releases/download/1.1.9/rustdesk-server-linux-amd64fb.zip
```

ç„¶åæˆ‘ä»¬éœ€è¦è§£å‹ç¼©è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä½ æ²¡æœ‰å®‰è£…unzipï¼Œè¯·å…ˆå®‰è£…unzipï¼š

```bash
sudo apt-get install unzip
```

ç„¶åè¿è¡Œä»¥ä¸‹è¯­å¥ï¼š

```bash
unzip rustdesk-server-linux-amd64.zip
```

è§£å‹ä¹‹åï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåä¸º`amd64`çš„æ–‡ä»¶å¤¹ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç»™å®ƒæ”¹ä¸ªåå­—ï¼š

```bash
mv amd64 RustDesk
```

è¿›å…¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ï¼š

```bash
cd RustDesk
```

## ä½¿ç”¨Screenè¿è¡ŒRustDeskæœåŠ¡å™¨

### ä»€ä¹ˆæ˜¯Screen
Screenæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨è¿œç¨‹è®¡ç®—æœºä¸Šè¿è¡Œçš„ç»ˆç«¯å¤ç”¨ç¨‹åºã€‚å®ƒå…è®¸æ‚¨åœ¨è¿œç¨‹è®¡ç®—æœºä¸Šè¿è¡Œå¤šä¸ªç»ˆç«¯ä¼šè¯ï¼Œå¹¶åœ¨æ–­å¼€SSHè¿æ¥åç»§ç»­è¿è¡Œè¿™äº›ä¼šè¯ã€‚è¿™å¯¹äºåœ¨è¿œç¨‹è®¡ç®—æœºä¸Šè¿è¡Œé•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºéå¸¸æœ‰ç”¨ã€‚

### å®‰è£…Screen

```bash
sudo apt-get install screen
```

### ä½¿ç”¨treeæŸ¥çœ‹æ–‡ä»¶å¤¹å†…å®¹å’Œç»“æ„
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…treeï¼š

```bash
sudo apt-get install tree
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨treeæŸ¥çœ‹æ–‡ä»¶å¤¹å†…å®¹å’Œç»“æ„ï¼š

```bash
sudo tree
```

ç„¶åä½ ä¼šçœ‹åˆ°è¿™æ ·çš„ç»“æœï¼š

```bash
RustDesk
â”œâ”€â”€ hbbr
â”œâ”€â”€ hbbs
â””â”€â”€ rustdesk-utils
```

!!! info
    - `hbbr`æ˜¯ä¸­ç»§æœåŠ¡å™¨
    - `hbbs`æ˜¯ä¿¡ä»¤æœåŠ¡å™¨
    - `rustdesk-utils`æ˜¯RustDeskæœåŠ¡å™¨çš„å·¥å…·

### è¿è¡ŒScreenä»¥åŠRustDeskæœåŠ¡å™¨

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä¸¤ä¸ªScreenä¼šè¯ï¼Œä¸€ä¸ªç”¨äºä¸­ç»§æœåŠ¡å™¨ï¼Œå¦ä¸€ä¸ªç”¨äºä¿¡ä»¤æœåŠ¡å™¨ã€‚

```bash
screen -R hbbr
```

ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œä¸­ç»§æœåŠ¡å™¨ï¼š

```bash
./hbbr
```

ç„¶åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›è¾“å‡ºï¼Œæ„å‘³ç€ä¸­ç»§æœåŠ¡å™¨æ­£åœ¨è¿è¡Œã€‚ç„¶åæŒ‰ä¸‹`Ctrl+A`ï¼Œç„¶åæŒ‰ä¸‹`D`ï¼Œä»¥æ–­å¼€Screenä¼šè¯ã€‚

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œå¦ä¸€ä¸ªScreenä¼šè¯ï¼Œç”¨äºä¿¡ä»¤æœåŠ¡å™¨ã€‚

```bash
screen -R hbbs
```

ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ³¨å†ŒæœåŠ¡å™¨ï¼š

```bash
./hbbs
```

ç„¶åçœ‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›è¾“å‡ºï¼Œæ„å‘³ç€ä¿¡ä»¤æœåŠ¡å™¨æ­£åœ¨è¿è¡Œã€‚ç„¶åæŒ‰ä¸‹`Ctrl+A`ï¼Œç„¶åæŒ‰ä¸‹`D`ï¼Œä»¥æ–­å¼€Screenä¼šè¯ã€‚

æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹Screenä¼šè¯çš„çŠ¶æ€ï¼š

```bash
screen -ls
```

ç„¶åä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœï¼š

```bash
There are screens on:
        12345.hbbs      (Detached)
        12345.hbbr      (Detached)
2 Sockets in /run/screen/S-root.
```

### å¤åˆ¶å…¬é’¥ç”¨äºå®¢æˆ·ç«¯é…ç½®

ç°åœ¨æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å†…å®¹ï¼Œä½¿ç”¨`tree`ï¼š

```bash
sudo tree
```

ç„¶åä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœï¼š

```bash
.
â”œâ”€â”€ RustDesk
â”‚Â Â  â”œâ”€â”€ db_v2.sqlite3
â”‚Â Â  â”œâ”€â”€ db_v2.sqlite3-shm
â”‚Â Â  â”œâ”€â”€ db_v2.sqlite3-wal
â”‚Â Â  â”œâ”€â”€ hbbr
â”‚Â Â  â”œâ”€â”€ hbbs
â”‚Â Â  â”œâ”€â”€ id_ed25519
â”‚Â Â  â”œâ”€â”€ id_ed25519.pub
â”‚Â Â  â””â”€â”€ rustdesk-utils
â””â”€â”€ rustdesk-server-linux-amd64.zip

```
å…¬é’¥æ–‡ä»¶æ˜¯`id_ed25519.pub`ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å…¬é’¥æ–‡ä»¶çš„å†…å®¹ï¼š

```bash
cat id_ed25519.pub
```
æˆ–è€…

```bash
more id_ed25519.pub
```

å¤åˆ¶å…¬é’¥æ–‡ä»¶çš„å†…å®¹ï¼Œæˆ‘ä»¬å°†åœ¨å®¢æˆ·ç«¯é…ç½®ä¸­ä½¿ç”¨å®ƒã€‚

### é˜²ç«å¢™é…ç½®

åœ¨ä½ çš„äº‘æœåŠ¡æä¾›å•†çš„æ§åˆ¶é¢æ¿ä¸­ï¼Œæ‰“å¼€é˜²ç«å¢™é…ç½®ï¼Œæ”¾è¡Œä»¥ä¸‹ç«¯å£ï¼š
- 21115 for TCP
- 21116 for TCP & UDP
- 21117 for TCP
- 21118 for TCP
- 21119 for TCP

å¿…è¦çš„è¯ï¼Œè¿˜è¦åœ¨ä½ çš„äº‘æœåŠ¡å™¨æ“ä½œç³»ç»Ÿä¸­æ”¾è¡Œä»¥ä¸Šç«¯å£ã€‚

### å®¢æˆ·ç«¯é…ç½®

éœ€è¦å‡†å¤‡çš„ä¿¡æ¯ï¼š
- æœåŠ¡å™¨IPåœ°å€
- æœåŠ¡å™¨å…¬é’¥

å‡è®¾ä½ å·²ç»å®‰è£…å¥½äº†RustDeskå®¢æˆ·ç«¯ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://rustdesk.com/docs/)ã€‚

æ‰“å¼€RustDeskå®¢æˆ·ç«¯ï¼Œåœ¨å·¦ä¾§ç”µè„‘IDä¸€é¡¹æœ€å³è¾¹çš„ä¸‰ä¸ªç‚¹ï¼Œç‚¹å‡»å®ƒï¼Œé€‰æ‹©ç½‘ç»œè®¾ç½®ã€‚

- IDæœåŠ¡å™¨åœ°å€ï¼š<ä½ çš„æœåŠ¡å™¨IP>
- ä¸­ç»§æœåŠ¡å™¨åœ°å€ï¼š<ä½ çš„æœåŠ¡å™¨IP>
- APIæœåŠ¡å™¨åœ°å€ï¼šå¯ä»¥ç•™ç©º
- ç§˜é’¥ï¼šç²˜è´´ä½ çš„æœåŠ¡å™¨å…¬é’¥

ä»¥ä¸Šçš„è¿‡ç¨‹åœ¨ä¸»æ§ç«¯å’Œè¢«æ§ç«¯éƒ½è¦è¿›è¡Œã€‚

åœ¨ä¸»æ§ç«¯ï¼Œè¾“å…¥è¢«æ§ç«¯çš„IDï¼Œç‚¹å‡»è¿æ¥ï¼Œç„¶åè¾“å…¥è¢«æ§ç«¯çš„å¯†ç ï¼Œç‚¹å‡»ç¡®å®šï¼Œå°±å¯ä»¥è¿æ¥åˆ°è¢«æ§ç«¯äº†ã€‚

åˆ°ç›®å‰ä½ç½®ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†è‡ªå»ºæœåŠ¡å™¨ä½¿ç”¨RustDeskçš„ç›®æ ‡ã€‚ä½†æ˜¯ç›®å‰çš„é…ç½®è¿˜ä¸å¤Ÿä¼˜é›…ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›é¢å¤–çš„é…ç½®ã€‚

### å°†è¿è¡ŒRustDeskæœåŠ¡å™¨é…ç½®ä¸ºç³»ç»ŸæœåŠ¡

æˆ‘ä»¬è¿™æ ·åšçš„åŸå› åœ¨äºï¼Œæˆ‘ä»¬ä¸æƒ³æ¯æ¬¡é‡å¯æœåŠ¡å™¨æ—¶éƒ½è¦æ‰‹åŠ¨è¿è¡ŒRustDeskæœåŠ¡å™¨ã€‚

æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°è¿™ä¸€ç›®æ ‡ï¼š
1. ä½¿ç”¨pm2
2. ä½¿ç”¨systemd

#### ä½¿ç”¨pm2

æˆ‘ä¸ªäººæ²¡æœ‰ä½¿ç”¨pm2ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³ä½¿ç”¨pm2ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

é¦–å…ˆå®‰è£…nodejs å’Œ npmï¼š

```bash
sudo apt-get install nodejs npm
```

ç„¶åå®‰è£…pm2ï¼š

```bash
sudo npm install pm2 -g
```

ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨RustDeskæœåŠ¡å™¨ï¼š

```bash
pm2 start hbbr
pm2 start hbbs
```

ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤å°†pm2é…ç½®ä¸ºç³»ç»ŸæœåŠ¡ï¼š

```bash
pm2 startup
```

#### ä½¿ç”¨systemd

æˆ‘ä¸ªäººä½¿ç”¨systemdï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨systemdï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

> hbbs

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º`RustDeskHbbs.service`çš„æ–‡ä»¶ï¼Œä½äº`/usr/lib/systemd/system/`ç›®å½•ä¸‹ï¼š

```bash
sudo vim /usr/lib/systemd/system/RustDeskHbbs.service
```

ç„¶åæŠŠä»¥ä¸‹ä¿¡æ¯å¤åˆ¶åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š

!!! note
    `<...>` ä¸­çš„å†…å®¹è¯·æ ¹æ®ä½ ä¸ªäººæƒ…å†µè¿›è¡Œä¿®æ”¹ã€‚

```bash
[Unit]
Description=RustDesk Hbbs
After=network.target

[Service]
User=<your user name>
Type=simple
WorkingDirectory=<directory where you put RustDesk Server>
ExecStart=<directory where you put RustDesk Server>/hbbs
ExecStop=/bin/kill -TERM $MAINPID

[Install]
WantedBy=multi-user.target
```

> hbbr

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º`RustDeskHbbr.service`çš„æ–‡ä»¶ï¼Œä½äº`/usr/lib/systemd/system/`ç›®å½•ä¸‹ï¼š

```bash
sudo vim /usr/lib/systemd/system/RustDeskHbbr.service
```

ç„¶åæŠŠä»¥ä¸‹ä¿¡æ¯å¤åˆ¶åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š

!!! note
    `<...>` ä¸­çš„å†…å®¹è¯·æ ¹æ®ä½ ä¸ªäººæƒ…å†µè¿›è¡Œä¿®æ”¹ã€‚

```bash
[Unit]
Description=RustDesk Hbbr
After=network.target

[Service]
User=<your user name>
Type=simple
WorkingDirectory=<directory where you put RustDesk Server>
ExecStart=<directory where you put RustDesk Server>/hbbr
ExecStop=/bin/kill -TERM $MAINPID

[Install]
WantedBy=multi-user.target
```

ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨RustDeskæœåŠ¡å™¨ï¼š

```bash
sudo systemctl start RustDeskHbbs
sudo systemctl start RustDeskHbbr
```

æˆ–è€…é‡è½½systemdé…ç½®ï¼š

```bash
sudo systemctl daemon-reload
```

### å¯ç”¨å¼ºåˆ¶åŠ å¯†

> hbbs
é‡æ–°æ‰“å¼€`/usr/lib/systemd/system/RustDeskHbbs.service`ï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ExecStartæ‰€åœ¨è¡Œï¼š

```bash
sudo vim /usr/lib/systemd/system/RustDeskHbbr.service
```

```bash
[Unit]
Description=RustDesk Hbbs
After=network.target

[Service]
User=<your user name>
Type=simple
WorkingDirectory=<directory where you put RustDesk Server>
ExecStart=<directory where you put RustDesk Server>/hbbs -k _
ExecStop=/bin/kill -TERM $MAINPID

[Install]
WantedBy=multi-user.target
```

> hbbr

é‡æ–°æ‰“å¼€`/usr/lib/systemd/system/RustDeskHbbr.service`ï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ExecStartæ‰€åœ¨è¡Œï¼š

```bash
sudo vim /usr/lib/systemd/system/RustDeskHbbr.service
```

```bash
[Unit]
Description=RustDesk Hbbr
After=network.target

[Service]
User=<your user name>
Type=simple
WorkingDirectory=<directory where you put RustDesk Server>
ExecStart=<directory where you put RustDesk Server>/hbbr -k _
ExecStop=/bin/kill -TERM $MAINPID

[Install]
WantedBy=multi-user.target
```

åˆ°æ­¤ç»“æŸã€‚